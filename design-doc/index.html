<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-design-doc" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Design Doc | RookDB Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rookdb.github.io/RookDB/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://rookdb.github.io/RookDB/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://rookdb.github.io/RookDB/design-doc"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Design Doc | RookDB Docs"><meta data-rh="true" name="description" content="Introduction to RookDB"><meta data-rh="true" property="og:description" content="Introduction to RookDB"><link data-rh="true" rel="canonical" href="https://rookdb.github.io/RookDB/design-doc"><link data-rh="true" rel="alternate" href="https://rookdb.github.io/RookDB/design-doc" hreflang="en"><link data-rh="true" rel="alternate" href="https://rookdb.github.io/RookDB/design-doc" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Design Doc","item":"https://rookdb.github.io/RookDB/design-doc"}]}</script><link rel="stylesheet" href="/RookDB/assets/css/styles.4b065cb5.css">
<script src="/RookDB/assets/js/runtime~main.19555072.js" defer="defer"></script>
<script src="/RookDB/assets/js/main.1c0f28c5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/RookDB/"><b class="navbar__title text--truncate">RookDB docs</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/RookDB/RookDB/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RookDB/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RookDB/API-Doc"><span title="API Doc" class="linkLabel_WmDU">API Doc</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RookDB/database-doc"><span title="Database Doc" class="linkLabel_WmDU">Database Doc</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/RookDB/design-doc"><span title="Design Doc" class="linkLabel_WmDU">Design Doc</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/RookDB/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Design Doc</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Design Doc</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction-to-rookdb">Introduction to RookDB<a href="#introduction-to-rookdb" class="hash-link" aria-label="Direct link to Introduction to RookDB" title="Direct link to Introduction to RookDB" translate="no">​</a></h2>
<p>RookDB is a disk-oriented database management system (DBMS) aimed at exploring the internal architecture of modern database engines, with a particular focus on the design and implementation of the <strong>Storage Manager</strong> of DBMS. The system follows a <strong>Relational Database model</strong>, similar to widely used relational DBMS such as PostgreSQL and MySQL.</p>
<p><img decoding="async" loading="lazy" alt="Relation Model DBMS Architecture" src="/RookDB/assets/images/DBMS-Arch-9ba91977e246fa0ff044553cdf463e48.png" width="926" height="1216" class="img_ev3q"></p>
<p>Based on the relational database architecture shown in the above figure, the primary objective of RookDB is to implement the key components of the storage manager that operate between the query processor and the underlying disk storage.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rookdb-architecture">RookDB Architecture<a href="#rookdb-architecture" class="hash-link" aria-label="Direct link to RookDB Architecture" title="Direct link to RookDB Architecture" translate="no">​</a></h2>
<p>The architecture of RookDB follows a layered design that separates logical metadata management from the physical representation of tables and the low-level organization of records within pages.</p>
<p>The storage manager in RookDB is broadly divided into the following four layers:</p>
<ul>
<li class="">Catalog Layer</li>
<li class="">Table Layer</li>
<li class="">Page Layer</li>
<li class="">Buffer Manager Layer</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="catalog-layer">Catalog Layer<a href="#catalog-layer" class="hash-link" aria-label="Direct link to Catalog Layer" title="Direct link to Catalog Layer" translate="no">​</a></h2>
<p>The Catalog Layer is responsible for managing logical metadata required by the database system.<br>
<!-- -->It maintains information about databases, tables, and column schemas. In RookDB, catalog metadata is stored in a JSON format.</p>
<p>For a detailed description of the catalog structure, refer to the Database Design Document available in the docs section of the GitHub repository.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="table-layer">Table Layer<a href="#table-layer" class="hash-link" aria-label="Direct link to Table Layer" title="Direct link to Table Layer" translate="no">​</a></h2>
<p>In RookDB, each table is stored as a dedicated file within the directory corresponding to its parent database. This hierarchical organization mirrors the structure of the catalog and provides a deterministic mapping from logical table identifiers to their physical storage locations on disk.</p>
<p>Each table file is logically divided into two distinct regions. The first region is a fixed-size table header occupying the initial 8 KB of the file. This header stores metadata required for table management, currently stores only the total number of allocated pages. The second region consists of a sequence of fixed-size data pages, each 8 KB in size, which store tuple data along with associated slot metadata.</p>
<p><img decoding="async" loading="lazy" alt="Logical Layout of a Table File" src="/RookDB/assets/images/Table-Arch-52e94a4e0d211be82467220fa8620369.png" width="1980" height="892" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="page-layer">Page Layer<a href="#page-layer" class="hash-link" aria-label="Direct link to Page Layer" title="Direct link to Page Layer" translate="no">​</a></h2>
<p>The Page Layer defines the internal layout and organization of records within a fixed-size page.<br>
<!-- -->RookDB adopts a slotted-page structure inspired by PostgreSQL, consisting of a page header, an item identifier array, and tuple data.</p>
<table><thead><tr><th>Page Layout</th><th>Page Header Structure</th></tr></thead><tbody><tr><td><img decoding="async" loading="lazy" alt="Page Layout" src="/RookDB/assets/images/Slotted-Page-035ef10369fca3b2e72f58692e801ea7.png" width="394" height="498" class="img_ev3q"></td><td><img decoding="async" loading="lazy" alt="Page Header Structure" src="/RookDB/assets/images/Page-Layout-2e5e61e1046c74d9c0e3e8f597844433.png" width="1218" height="1290" class="img_ev3q"></td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="buffer-manager-layer">Buffer Manager Layer<a href="#buffer-manager-layer" class="hash-link" aria-label="Direct link to Buffer Manager Layer" title="Direct link to Buffer Manager Layer" translate="no">​</a></h2>
<p>The Buffer Manager Layer maintains an in-memory cache of pages to minimize disk I/O and efficiently support data loading and manipulation.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/RookDB/database-doc"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Database Doc</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction-to-rookdb" class="table-of-contents__link toc-highlight">Introduction to RookDB</a></li><li><a href="#rookdb-architecture" class="table-of-contents__link toc-highlight">RookDB Architecture</a></li><li><a href="#catalog-layer" class="table-of-contents__link toc-highlight">Catalog Layer</a></li><li><a href="#table-layer" class="table-of-contents__link toc-highlight">Table Layer</a></li><li><a href="#page-layer" class="table-of-contents__link toc-highlight">Page Layer</a></li><li><a href="#buffer-manager-layer" class="table-of-contents__link toc-highlight">Buffer Manager Layer</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>