"use strict";(globalThis.webpackChunkrook_db=globalThis.webpackChunkrook_db||[]).push([[671],{4990(e,a,t){t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"design-doc","title":"Design Doc","description":"Introduction to RookDB","source":"@site/content/Design-Doc.md","sourceDirName":".","slug":"/design-doc","permalink":"/RookDB/design-doc","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"design-doc","title":"Design Doc"},"sidebar":"tutorialSidebar","previous":{"title":"Database Doc","permalink":"/RookDB/database-doc"}}');var n=t(4848),r=t(8453);const o={id:"design-doc",title:"Design Doc"},s=void 0,d={},l=[{value:"Introduction to RookDB",id:"introduction-to-rookdb",level:2},{value:"RookDB Architecture",id:"rookdb-architecture",level:2},{value:"Catalog Layer",id:"catalog-layer",level:2},{value:"Table Layer",id:"table-layer",level:2},{value:"Page Layer",id:"page-layer",level:2},{value:"Buffer Manager Layer",id:"buffer-manager-layer",level:2}];function c(e){const a={br:"br",h2:"h2",hr:"hr",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.h2,{id:"introduction-to-rookdb",children:"Introduction to RookDB"}),"\n",(0,n.jsxs)(a.p,{children:["RookDB is a disk-oriented database management system (DBMS) aimed at exploring the internal architecture of modern database engines, with a particular focus on the design and implementation of the ",(0,n.jsx)(a.strong,{children:"Storage Manager"})," of DBMS. The system follows a ",(0,n.jsx)(a.strong,{children:"Relational Database model"}),", similar to widely used relational DBMS such as PostgreSQL and MySQL."]}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"Relation Model DBMS Architecture",src:t(8938).A+"",width:"926",height:"1216"})}),"\n",(0,n.jsx)(a.p,{children:"Based on the relational database architecture shown in the above figure, the primary objective of RookDB is to implement the key components of the storage manager that operate between the query processor and the underlying disk storage."}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"rookdb-architecture",children:"RookDB Architecture"}),"\n",(0,n.jsx)(a.p,{children:"The architecture of RookDB follows a layered design that separates logical metadata management from the physical representation of tables and the low-level organization of records within pages."}),"\n",(0,n.jsx)(a.p,{children:"The storage manager in RookDB is broadly divided into the following four layers:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Catalog Layer"}),"\n",(0,n.jsx)(a.li,{children:"Table Layer"}),"\n",(0,n.jsx)(a.li,{children:"Page Layer"}),"\n",(0,n.jsx)(a.li,{children:"Buffer Manager Layer"}),"\n"]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"catalog-layer",children:"Catalog Layer"}),"\n",(0,n.jsxs)(a.p,{children:["The Catalog Layer is responsible for managing logical metadata required by the database system.",(0,n.jsx)(a.br,{}),"\n","It maintains information about databases, tables, and column schemas. In RookDB, catalog metadata is stored in a JSON format."]}),"\n",(0,n.jsx)(a.p,{children:"For a detailed description of the catalog structure, refer to the Database Design Document available in the docs section of the GitHub repository."}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"table-layer",children:"Table Layer"}),"\n",(0,n.jsx)(a.p,{children:"In RookDB, each table is stored as a dedicated file within the directory corresponding to its parent database. This hierarchical organization mirrors the structure of the catalog and provides a deterministic mapping from logical table identifiers to their physical storage locations on disk."}),"\n",(0,n.jsx)(a.p,{children:"Each table file is logically divided into two distinct regions. The first region is a fixed-size table header occupying the initial 8 KB of the file. This header stores metadata required for table management, currently stores only the total number of allocated pages. The second region consists of a sequence of fixed-size data pages, each 8 KB in size, which store tuple data along with associated slot metadata."}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"Logical Layout of a Table File",src:t(9912).A+"",width:"1980",height:"892"})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"page-layer",children:"Page Layer"}),"\n",(0,n.jsxs)(a.p,{children:["The Page Layer defines the internal layout and organization of records within a fixed-size page.",(0,n.jsx)(a.br,{}),"\n","RookDB adopts a slotted-page structure inspired by PostgreSQL, consisting of a page header, an item identifier array, and tuple data."]}),"\n",(0,n.jsxs)(a.table,{children:[(0,n.jsx)(a.thead,{children:(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.th,{children:"Page Layout"}),(0,n.jsx)(a.th,{children:"Page Header Structure"})]})}),(0,n.jsx)(a.tbody,{children:(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:(0,n.jsx)(a.img,{alt:"Page Layout",src:t(3016).A+"",width:"394",height:"498"})}),(0,n.jsx)(a.td,{children:(0,n.jsx)(a.img,{alt:"Page Header Structure",src:t(7745).A+"",width:"1218",height:"1290"})})]})})]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"buffer-manager-layer",children:"Buffer Manager Layer"}),"\n",(0,n.jsx)(a.p,{children:"The Buffer Manager Layer maintains an in-memory cache of pages to minimize disk I/O and efficiently support data loading and manipulation."})]})}function h(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8938(e,a,t){t.d(a,{A:()=>i});const i=t.p+"assets/images/DBMS-Arch-9ba91977e246fa0ff044553cdf463e48.png"},7745(e,a,t){t.d(a,{A:()=>i});const i=t.p+"assets/images/Page-Layout-2e5e61e1046c74d9c0e3e8f597844433.png"},3016(e,a,t){t.d(a,{A:()=>i});const i=t.p+"assets/images/Slotted-Page-035ef10369fca3b2e72f58692e801ea7.png"},9912(e,a,t){t.d(a,{A:()=>i});const i=t.p+"assets/images/Table-Arch-52e94a4e0d211be82467220fa8620369.png"},8453(e,a,t){t.d(a,{R:()=>o,x:()=>s});var i=t(6540);const n={},r=i.createContext(n);function o(e){const a=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(r.Provider,{value:a},e.children)}}}]);